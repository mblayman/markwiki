{% extends 'base.html' %}
{% block title %}MarkWiki - {{ title }}{% endblock %}

{% block content %}
<ul class='breadcrumb'>
  <li><a href='{{ url_for('list') }}'>Explore</a>
    <i class='icon-chevron-right'></i>
  </li>
{% for section in g.sections %}
  <li><a href='{{ url_for('list', section_path=section.path) }}'
    >{{ section.name }}</a> <i class='icon-chevron-right'></i></li>
{% endfor %}
  <li class='active'>{{ title }}</li>
</ul>

{{ wiki|safe }}
{% endblock %}

{% block actions %}
{# When freezing, do not display the edit and delete links. #}
{% if not config['FREEZING'] %}
  <li class='divider'></li>
  <li class='nav-header'>{{ title }} Actions</li>
  <li><a href='{{ url_for('edit', page_path=page_path) }}'><i
    class='icon-edit'></i> Edit</a></li>
  {# Home is special so don't allow it to be deleted. #}
  {% if page_path != 'Home' %}
  {# Allow users to get an error from the server if JavaScript is disabled. #}
  <li><a class='delete' href='{{ url_for('delete', page_path=page_path) }}'><i
    class='icon-remove'></i> Delete</a></li>
  <form id='delete_form' action='{{ url_for('delete', page_path=page_path) }}'
     method='POST'>
  </form>
  {% endif %}
{% endif %}
{% endblock %}

{% block onready %}
$('a.delete').click(function(event) {
  // Prevent the default so that the GET delete doesn't happen before the POST.
  event.preventDefault();
  $('#delete_form').submit();
});
{% endblock %}
